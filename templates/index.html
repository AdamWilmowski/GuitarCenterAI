{% extends "base.html" %}

{% block title %}Generator Opisów Gitar AI{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4">
        <i class="fas fa-guitar me-2"></i>Guitar AI - Generator Opisów
    </h1>
    
    <!-- Navigation Tabs -->
    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="guitar-tab" data-bs-toggle="tab" data-bs-target="#guitar" type="button" role="tab" aria-controls="guitar" aria-selected="true">
                <i class="fas fa-guitar me-2"></i>Opis Gitary
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="company-tab" data-bs-toggle="tab" data-bs-target="#company" type="button" role="tab" aria-controls="company" aria-selected="false">
                <i class="fas fa-building me-2"></i>Opis Firmy
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="examples-tab" data-bs-toggle="tab" data-bs-target="#examples" type="button" role="tab" aria-controls="examples" aria-selected="false">
                <i class="fas fa-plus-circle me-2"></i>Dodaj Przykłady
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="learning-tab" data-bs-toggle="tab" data-bs-target="#learning" type="button" role="tab" aria-controls="learning" aria-selected="false">
                <i class="fas fa-brain me-2"></i>Dane Uczenia
            </button>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="mainTabContent">
        <!-- Guitar Tab -->
        <div class="tab-pane fade show active" id="guitar" role="tabpanel" aria-labelledby="guitar-tab">
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-guitar me-2"></i>Informacje o Gitarze</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="guitarInput" class="form-label">Wprowadź informacje o gitarze:</label>
                            <textarea class="form-control" id="guitarInput" rows="8" 
                                    placeholder="Opisz gitarę: model, producent, specyfikacje, charakterystykę dźwięku, materiały, itp. Możesz używać języka polskiego lub angielskiego..."></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="generateDescription('guitar')">
                            <i class="fas fa-magic me-2"></i>Wygeneruj Opis
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-file-alt me-2"></i>Wygenerowany Opis</h5>
                    </div>
                    <div class="card-body">
                        <div id="guitarOutput" class="border rounded p-3" style="min-height: 200px; background-color: #f8f9fa;">
                            <p class="text-muted">Opis pojawi się tutaj...</p>
                        </div>
                        <div id="guitarActions" class="mt-3" style="display: none;">
                            <button class="btn btn-success btn-sm me-2" onclick="saveDescription('guitar')">
                                <i class="fas fa-save me-1"></i>Zapisz
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="enableCorrection('guitar')">
                                <i class="fas fa-edit me-1"></i>Popraw
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Company Tab -->
    <div class="tab-pane fade" id="company" role="tabpanel" aria-labelledby="company-tab">
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-building me-2"></i>Informacje o Firmie</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="companyInput" class="form-label">Wprowadź informacje o firmie:</label>
                            <textarea class="form-control" id="companyInput" rows="8" 
                                    placeholder="Opisz firmę: nazwa, historia, produkty, osiągnięcia, filozofia, itp. Możesz używać języka polskiego lub angielskiego..."></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="generateDescription('company')">
                            <i class="fas fa-magic me-2"></i>Wygeneruj Opis
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-file-alt me-2"></i>Wygenerowany Opis</h5>
                    </div>
                    <div class="card-body">
                        <div id="companyOutput" class="border rounded p-3" style="min-height: 200px; background-color: #f8f9fa;">
                            <p class="text-muted">Opis pojawi się tutaj...</p>
                        </div>
                        <div id="companyActions" class="mt-3" style="display: none;">
                            <button class="btn btn-success btn-sm me-2" onclick="saveDescription('company')">
                                <i class="fas fa-save me-1"></i>Zapisz
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="enableCorrection('company')">
                                <i class="fas fa-edit me-1"></i>Popraw
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Examples Tab -->
    <div class="tab-pane fade" id="examples" role="tabpanel" aria-labelledby="examples-tab">
        <div class="row mt-4">
            <div class="col-12 mb-4">
                <div class="alert alert-info">
                    <h6><i class="fas fa-info-circle me-2"></i>Jak dodawać przykłady?</h6>
                    <p class="mb-2">Dodawaj własne przykłady opisów gitar i firm w języku polskim. Te przykłady będą używane przez AI do uczenia się stylu i terminologii.</p>
                    <ul class="mb-0">
                        <li><strong>Gitary:</strong> Opisuj specyfikacje techniczne, brzmienie, materiały, przeznaczenie</li>
                        <li><strong>Firmy:</strong> Opisuj historię, osiągnięcia, produkty, filozofię firmy</li>
                        <li><strong>Używaj polskiej terminologii muzycznej</strong></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-plus-circle me-2"></i>Dodaj Nowy Przykład</h5>
                    </div>
                    <div class="card-body">
                        <form id="addExampleForm">
                            <div class="mb-3">
                                <label for="exampleType" class="form-label">Typ Przykładu:</label>
                                <select class="form-control" id="exampleType" required>
                                    <option value="guitar">Gitara</option>
                                    <option value="company">Firma</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="exampleContent" class="form-label">Treść Przykładu:</label>
                                <textarea class="form-control" id="exampleContent" rows="8" required 
                                        placeholder="Wprowadź szczegółowy opis gitary lub firmy w języku polskim..."></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="exampleTitle" class="form-label">Tytuł Przykładu:</label>
                                <input type="text" class="form-control" id="exampleTitle" required 
                                       placeholder="np. Fender Stratocaster, Gibson Les Paul, Firma Fender...">
                            </div>
                            <div class="mb-3">
                                <label for="exampleCategory" class="form-label">Kategoria:</label>
                                <input type="text" class="form-control" id="exampleCategory" required 
                                       placeholder="np. Elektryczna, Akustyczna, Producent, Vintage...">
                            </div>
                            <div class="mb-3">
                                <label for="exampleTags" class="form-label">Tagi (oddzielone przecinkami):</label>
                                <input type="text" class="form-control" id="exampleTags" 
                                       placeholder="np. rock, blues, vintage, premium, amerykańska...">
                                <small class="form-text text-muted">Tagi pomagają w kategoryzacji przykładów</small>
                            </div>
                            <div id="exampleMessage" class="alert" style="display: none;"></div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus me-2"></i>Dodaj Przykład
                            </button>
                            <button type="button" class="btn btn-secondary ms-2" onclick="resetExampleForm()">
                                <i class="fas fa-undo me-2"></i>Wyczyść Formularz
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-list-ul me-2"></i>Twoje Przykłady</h5>
                    </div>
                    <div class="card-body">
                        <div id="examplesList" class="border rounded p-3" style="max-height: 400px; overflow-y: auto;">
                            <p class="text-muted">Brak przykładów...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learning Data Tab -->
    <div class="tab-pane fade" id="learning" role="tabpanel" aria-labelledby="learning-tab">
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-brain me-2"></i>Dane Uczenia AI</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h6><i class="fas fa-history me-2"></i>Ostatnie Poprawki</h6>
                                <div id="correctionsList" class="border rounded p-3" style="max-height: 400px; overflow-y: auto;">
                                    <p class="text-muted">Brak poprawek...</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fas fa-save me-2"></i>Zapisane Opisy</h6>
                                <div id="savedDescriptionsList" class="border rounded p-3" style="max-height: 400px; overflow-y: auto;">
                                    <p class="text-muted">Brak zapisanych opisów...</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fas fa-robot me-2"></i>Wygenerowane Opisy</h6>
                                <div id="returnedDescriptionsList" class="border rounded p-3" style="max-height: 400px; overflow-y: auto;">
                                    <p class="text-muted">Brak wygenerowanych opisów...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>

<!-- Correction Modal -->
<div class="modal fade" id="correctionModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Popraw Opis</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Oryginalny Opis:</label>
                    <div id="originalText" class="border rounded p-3 bg-light"></div>
                </div>
                <div class="mb-3">
                    <label for="correctedText" class="form-label">Poprawiony Opis:</label>
                    <textarea class="form-control" id="correctedText" rows="8"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
                <button type="button" class="btn btn-primary" onclick="submitCorrection()">Zatwierdź Poprawkę</button>
            </div>
        </div>
    </div>
</div>

<!-- Loading Spinner -->
<div id="loadingSpinner" class="position-fixed top-50 start-50 translate-middle" style="display: none; z-index: 9999;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Ładowanie...</span>
    </div>
</div>
{% endblock %}

{% block scripts %}{% endblock %}
